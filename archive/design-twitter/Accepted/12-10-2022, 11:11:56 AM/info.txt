{"id":857745529,"lang":"python3","lang_name":"Python3","time":"9Â months","timestamp":1670699516,"status":10,"status_display":"Accepted","runtime":"56 ms","url":"/submissions/detail/857745529/","is_pending":"Not Pending","title":"Design Twitter","memory":"14.3 MB","code":"class Tweet:\n    def __init__(self, tweetId: int, timestamp: int, next_: 'Tweet' = None):\n        self.tweetId = tweetId\n        self.timestamp = timestamp\n        self.next_ = next_\n\nclass User:\n    def __init__(self, userId: int, follows: set[int] = set(), latestTweet: Tweet | None = None):\n        self.userId = userId\n        self.follows = set([*follows, self.userId])\n        self.latestTweet = latestTweet\n        self.ptr = self.latestTweet\n\n    def __lt__(self, other: 'User') -> bool:\n        return self.ptr.timestamp > other.ptr.timestamp\n\n    def follow(self, followeeId: int) -> None:\n        self.follows.add(followeeId)\n\n    def unfollow(self, followeeId: int) -> None:\n        self.follows.discard(followeeId)\n\n    def postTweet(self, tweet: Tweet) -> None:\n        if self.latestTweet:\n            tweet.next_ = self.latestTweet\n        self.latestTweet = tweet\n        self.ptr = self.latestTweet\n\n    def incPtr(self) -> None:\n        self.ptr = self.ptr.next_\n\n    def resetPtr(self) -> None:\n        self.ptr = self.latestTweet\n\n    def isEmpty(self) -> bool:\n        return self.latestTweet is None\n\nclass Twitter:\n    def __init__(self):\n        self.clock = 0\n        self.users = dict()\n\n    def postTweet(self, userId: int, tweetId: int) -> None:\n        newTweet = Tweet(tweetId, self.clock)\n        self.users[userId] = self.users.get(userId, User(userId))\n        self.users[userId].postTweet(newTweet)\n        self.clock += 1\n\n    def getNewsFeed(self, userId: int) -> List[int]:\n        if userId not in self.users:\n            return []\n        [self.users[followeeId].resetPtr() for followeeId in self.users[userId].follows \\\n            if followeeId in self.users]\n\n        pq = [self.users[followeeId] for followeeId in self.users[userId].follows \\\n            if followeeId in self.users and not self.users[followeeId].isEmpty()]\n        heapq.heapify(pq)\n        feed = []\n        while pq and len(feed) < 10:\n            user = heapq.heappop(pq)\n            feed.append(user.ptr.tweetId)\n            if user.ptr.next_:\n                user.incPtr()\n                heapq.heappush(pq, user)\n        return feed\n\n    def follow(self, followerId: int, followeeId: int) -> None:\n        self.users[followerId] = self.users.get(followerId, User(followerId))\n        self.users[followerId].follow(followeeId)\n\n    def unfollow(self, followerId: int, followeeId: int) -> None:\n        self.users[followerId].unfollow(followeeId)\n\n\n# Your Twitter object will be instantiated and called as such:\n# obj = Twitter()\n# obj.postTweet(userId,tweetId)\n# param_2 = obj.getNewsFeed(userId)\n# obj.follow(followerId,followeeId)\n# obj.unfollow(followerId,followeeId)","compare_result":"1111111111111111","title_slug":"design-twitter","has_notes":false,"flag_type":1}